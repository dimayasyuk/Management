<ng4-loading-spinner></ng4-loading-spinner>
<app-header [project]="project"></app-header>
<div class="container-fluid body-container">
  <div class="row">
    <div class="col-sm-12">
      <button class="btn btn-link" [routerLink]="['/projects']">{{project.code}}</button>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-12">
      <table class="table table-striped">
        <thead>
        <tr>
          <th scope="col">Task Code</th>
          <th scope="col">Priority</th>
          <th scope="col">Status</th>
          <th scope="col">Created</th>
          <th scope="col">Updated</th>
          <th scope="col">Due Date</th>
          <th scope="col">Estimation</th>
          <th scope="col">Assignee</th>
          <th scope="col">Description</th>
          <th scope="col">Delete Action</th>
          <th scope="col">Edit Action</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let task of tasks">
          <td [routerLink]="['/task', task.id]">{{task.code}}</td>
          <td>{{task.priority.name}}</td>
          <td>{{task.status.name}}</td>
          <td>{{task.created}}</td>
          <td>{{task.updated}}</td>
          <td>{{task.dueDate}}</td>
          <td>{{task.estimation}}</td>
          <td>{{task.assignee.name}} {{task.assignee.sname}}</td>
          <td>{{task.description}}</td>
          <td>
            <button type="button" class="btn btn-danger" (click)="deleteTask(task.id)">Delete</button>
          </td>
          <td>
            <button type="button" class="btn btn-secondary" (click)="openModal(newtask,task)">Edit</button>
          </td>
        </tbody>
      </table>
    </div>
  </div>
</div>
<ng-template #newtask>
  <app-edit-task [id]="editTask.id" [modalRef]="modalRef"></app-edit-task>
</ng-template>
